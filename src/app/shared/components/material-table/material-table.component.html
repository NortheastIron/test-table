<div class="app-material-table">
    <table mat-table [dataSource]="dataSource" matSort>
        @for (col of columns(); track col) {
            <ng-container [matColumnDef]="col.key">
                @if (col.sort) {
                    <th mat-header-cell 
                        *matHeaderCellDef 
                        mat-sort-header>
                        {{col.name}}
                    </th>
                } @else {
                    <th mat-header-cell 
                        *matHeaderCellDef>
                        {{col.name}}
                    </th>
                }

                <td mat-cell *matCellDef="let row">
                    {{ row[col.key] }}
                </td>
            </ng-container>
        }

        <tr mat-header-row *matHeaderRowDef="displayedColumns()" class="sticky-header"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns();"></tr>
    </table>
</div>
